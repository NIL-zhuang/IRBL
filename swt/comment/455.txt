Constructs a new instance of this class given its parent which must be a code Menu code and a style value describing its behavior and appearance The item is added to the end of the items maintained by its parent p The style value is either one of the style constants defined in class code SWT code which is applicable to instances of this class or must be built by em bitwise OR em ing together that is using the code int code operator two or more of those code SWT code style constants The class description lists the style constants that are applicable to the class Style bits are also inherited from superclasses p param parent a menu control which will be the parent of the new instance cannot be null param style the style of control to construct exception IllegalArgumentException ul li ERROR NULL ARGUMENT if the parent is null li ul exception SWTException ul li ERROR THREAD INVALID ACCESS if not called from the thread that created the parent li li ERROR INVALID SUBCLASS if this class is not an allowed subclass li ul see SWT CHECK see SWT CASCADE see SWT PUSH see SWT RADIO see SWT SEPARATOR see Widget checkSubclass see Widget getStyle
Constructs a new instance of this class given its parent which must be a code Menu code a style value describing its behavior and appearance and the index at which to place it in the items maintained by its parent p The style value is either one of the style constants defined in class code SWT code which is applicable to instances of this class or must be built by em bitwise OR em ing together that is using the code int code operator two or more of those code SWT code style constants The class description lists the style constants that are applicable to the class Style bits are also inherited from superclasses p param parent a menu control which will be the parent of the new instance cannot be null param style the style of control to construct param index the index to store the receiver in its parent exception IllegalArgumentException ul li ERROR NULL ARGUMENT if the parent is null li ul exception SWTException ul li ERROR THREAD INVALID ACCESS if not called from the thread that created the parent li li ERROR INVALID SUBCLASS if this class is not an allowed subclass li ul see SWT CHECK see SWT CASCADE see SWT PUSH see SWT RADIO see SWT SEPARATOR see Widget checkSubclass see Widget getStyle
Adds the listener to the collection of listeners who will be notified when the arm events are generated for the control by sending it one of the messages defined in the code ArmListener code interface param listener the listener which should be notified exception IllegalArgumentException ul li ERROR NULL ARGUMENT if the listener is null li ul exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul see ArmListener see removeArmListener
Adds the listener to the collection of listeners who will be notified when the help events are generated for the control by sending it one of the messages defined in the code HelpListener code interface param listener the listener which should be notified exception IllegalArgumentException ul li ERROR NULL ARGUMENT if the listener is null li ul exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul see HelpListener see removeHelpListener
Adds the listener to the collection of listeners who will be notified when the menu item is selected by sending it one of the messages defined in the code SelectionListener code interface p When code widgetSelected code is called the stateMask field of the event object is valid code widgetDefaultSelected code is not called p param listener the listener which should be notified exception IllegalArgumentException ul li ERROR NULL ARGUMENT if the listener is null li ul exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul see SelectionListener see removeSelectionListener see SelectionEvent
Bug in Windows For some reason VkKeyScan fails to map ESC to VK ESCAPE and DEL to VK DELETE The fix is to map these keys as a special case
Returns the widget accelerator An accelerator is the bit wise OR of zero or more modifier masks and a key Examples code SWT CONTROL SWT SHIFT T SWT ALT SWT F2 code The default value is zero indicating that the menu item does not have an accelerator return the accelerator or 0 ul exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul
public
Returns code true code if the receiver is enabled and code false code otherwise A disabled menu item is typically not selectable from the user interface and draws with an inactive or grayed look return the receiver s enabled state exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul see isEnabled
Returns the receiver s cascade menu if it has one or null if it does not Only code CASCADE code menu items can have a pull down menu The sequence of key strokes button presses and or button releases that are used to request a pull down menu is platform specific return the receiver s menu exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul
Returns the receiver s parent which must be a code Menu code return the receiver s parent exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul
Returns code true code if the receiver is selected and false otherwise p When the receiver is of type code CHECK code or code RADIO code it is selected when it is checked return the selection state exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul
Returns code true code if the receiver is enabled and all of the receiver s ancestors are enabled and code false code otherwise A disabled menu item is typically not selectable from the user interface and draws with an inactive or grayed look return the receiver s enabled state exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul see getEnabled
Removes the listener from the collection of listeners who will be notified when the arm events are generated for the control param listener the listener which should no longer be notified exception IllegalArgumentException ul li ERROR NULL ARGUMENT if the listener is null li ul exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul see ArmListener see addArmListener
Removes the listener from the collection of listeners who will be notified when the help events are generated for the control param listener the listener which should no longer be notified exception IllegalArgumentException ul li ERROR NULL ARGUMENT if the listener is null li ul exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul see HelpListener see addHelpListener
Removes the listener from the collection of listeners who will be notified when the control is selected param listener the listener which should no longer be notified exception IllegalArgumentException ul li ERROR NULL ARGUMENT if the listener is null li ul exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul see SelectionListener see addSelectionListener
Sets the widget accelerator An accelerator is the bit wise OR of zero or more modifier masks and a key Examples code SWT MOD1 SWT MOD2 T SWT MOD3 SWT F2 code code SWT CONTROL SWT SHIFT T SWT ALT SWT F2 code The default value is zero indicating that the menu item does not have an accelerator param accelerator an integer that is the bit wise OR of masks and a key ul exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul
Enables the receiver if the argument is code true code and disables it otherwise A disabled menu item is typically not selectable from the user interface and draws with an inactive or grayed look param enabled the new enabled state exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul
Sets the image the receiver will display to the argument p Note This operation is a hint and is not supported on platforms that do not have this concept for example Windows NT p param image the image to display exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul
Check to make sure the new menu is valid
Assign the new menu
Feature in Windows When SetMenuItemInfo is used to set a submenu and the menu item already has a submenu Windows destroys the previous menu This is undocumented and unexpected but not necessarily wrong The fix is to remove the item with RemoveMenu which does not destroy the submenu and then insert the item with InsertMenuItem
Bug in Windows When GetMenuItemInfo is used to get the text for an item that has a bitmap set using MIIM BITMAP the text is not returned This means that when SetMenuItemInfo is used to set the submenu and the current menu state the text is lost The fix is to temporarily remove the bitmap and restore it after the text and submenu have been set
Restore the bitmap that was removed to work around a problem in GetMenuItemInfo and menu items that have bitmaps set with MIIM BITMAP
On WinCE InsertMenuItem is not available The fix is to use SetMenuItemInfo but this call does not set the menu item state and submenu The fix is to use InsertMenu to insert the item SetMenuItemInfo to set the string and EnableMenuItem and CheckMenuItem to set the state
Assign the new menu in the OS
Sets the receiver s pull down menu to the argument Only code CASCADE code menu items can have a pull down menu The sequence of key strokes button presses and or button releases that are used to request a pull down menu is platform specific param menu the new pull down menu exception IllegalArgumentException ul li ERROR MENU NOT DROP DOWN if the menu is not a drop down menu li li ERROR MENUITEM NOT CASCADE if the menu item is not a code CASCADE code li li ERROR INVALID ARGUMENT if the menu has been disposed li li ERROR INVALID PARENT if the menu is not in the same widget tree li ul exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul
Sets the selection state of the receiver p When the receiver is of type code CHECK code or code RADIO code it is selected when it is checked param selected the new selection state exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul
Bug in Windows 2000 For some reason when MIIM TYPE is set on a menu item that also has MIIM BITMAP the MIIM TYPE clears the MIIM BITMAP style The fix is to reset both MIIM BITMAP Note this does not happen on Windows 98
Use the character encoding for the default locale
Restore the bitmap that was removed to work around a problem in GetMenuItemInfo and menu items that have bitmaps set with MIIM BITMAP
Bug in WinCE PPC Tool items on the menubar don t resize correctly when the character is used even when it is a sequence The fix is to remove all from the string
Use the character encoding for the default locale
Sets the receiver s text The string may include the mnemonic character and accelerator text p Mnemonics are indicated by an amp that causes the next character to be the mnemonic When the user presses a key sequence that matches the mnemonic a selection event occurs On most platforms the mnemonic appears underlined but may be emphasised in a platform specific manner The mnemonic indicator character amp can be escaped by doubling it in the string causing a single amp to be displayed p p Accelerator text is indicated by the t character On platforms that support accelerator text the text that follows the t character is displayed to the user typically indicating the key stroke that will cause the item to become selected On most platforms the accelerator text appears right aligned in the menu Setting the accelerator text does not install the accelerator key sequence The accelerator key sequence is installed using setAccelerator p param string the new text exception IllegalArgumentException ul li ERROR NULL ARGUMENT if the text is null li ul exception SWTException ul li ERROR WIDGET DISPOSED if the receiver has been disposed li li ERROR THREAD INVALID ACCESS if not called from the thread that created the receiver li ul see setAccelerator
Bug in Windows When a bitmap is included in the menu bar the HDC seems to already include the left coordinate The fix is to ignore this value when the item is in a menu bar
Bug in Windows If a menu contains items that have images and can be checked Windows does not include the width of the image and the width of the check when computing the width of the menu When the longest item does not have an image the label and the accelerator text can overlap The fix is to use SetMenuItemInfo to indicate that all items have a bitmap and then include the width of the widest bitmap in WM MEASURECHILD
Feature in Windows On Windows 98 it is necessary to add 4 pixels to the width of the image or the image and text are too close On other Windows platforms this causes the text of the longest item to touch the accelerator text The fix is to add only 2 pixels in this case
